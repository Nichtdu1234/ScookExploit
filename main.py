import api
from other import StudentSearch, TaskSearch

print("Warning: Running this program too often (like 100 times) in a short time may suggest to scook that you are abusing this exploit!\nIf you are using a non student account this may not work.")
session = api.session(input("Unity Session: "))

while True:
    # [1] Finish assignment
    # [2] Search for student
    # [3] Search for task
    # [4] Look student up
    # [5] Look task up
    # [6] Get ips/email addresses
    # [7] settings (duration etc)

    action = input("\n[1] Finish assignment\n[2] Search for student\n[3] Search for task\n[4] Look student up\n[5] Look task up\n[6] Get Ips/email addresses\n[7] Settings\n[1-7]: ")
    print('')

    try: action = int(action)
    except ValueError: action = 0
    if 0 >= action <= 8: print("Enter a value from 1-7!")

    elif action == 1:
        print("This feature is not available yet.")

    elif action == 2:
        param = input("Name to search for: ")
        results = StudentSearch(session.students, param)
        print(str(len(results)) + " students found.")
        if len(results) != 0: print('\n'.join(results))

    elif action == 3:
        param = input("Task to search for: ")
        results = TaskSearch(session.tasks, param)
        print(str(len(results)) + " tasks found.")
        if len(results) != 0: print('\n'.join(results))

    elif action == 4:
        try: print(session.students[input("Student to look up: ")])
        except KeyError: print("Student not found.")

    elif action == 5:
        try: print(session.tasks[input("Task to look up: ")])
        except KeyError: print("Task not found.")

    elif action == 6:
        for s in session.students:
            print(session.students[s].name + ": " + session.students[s].ip + ' ' + session.students[s].email)

    elif action == 6:
        print("Not available yet!")
