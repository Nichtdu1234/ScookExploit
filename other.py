from urllib.request import Request, urlopen
from json import loads, JSONDecodeError

def getjson(url, headers):
    request = Request(url, headers=headers)
    try: return loads(urlopen(request).read().decode("utf-8"))
    except JSONDecodeError: exit(2)

def ReadTime(time):
    if ':' in time:
        uh = time.split('T')[0].split('-')
        lh = time.split('T')[1].split(':')
        return uh[2] + '.' + uh[1] + '.' + uh[0] + ' ' + lh[0] + ':' + lh[1]
    else:
        d = time.split('-')[2]
        m = time.split('-')[1]
        y = time.split('-')[0]
        return d + '.' + m + '.' + y

def StudentSearch(students, search_for):
    found = []
    for s in students:
        if students[s].name.lower().startswith(search_for): found.append(students[s].name)
    return found

def TaskSearch(tasks, search_for):
    found = []
    for t in tasks:
        if tasks[t].title.lower().startswith(search_for): found.append(tasks[t].title)
    return found

def AssignmentNames(assignments):
    Return = []
    for assignment in assignments: Return.append(assignments[assignment].title)
    return Return

